# yourConnector 代码事实总索引

## 1. 文档目的

1. 以代码目录为起点维护文档，不从旧文档反推实现。
2. 提供“源码文件 -> 能力文档”对照入口，减少实现细节遗漏。
3. 作为 `scripts/check-doc-consistency.sh` 的门禁输入，新增代码后必须补充映射。

## 2. 代码域与文档映射

| 代码域（先看代码） | 对应文档（再看说明） |
| --- | --- |
| `app/mobile/ui/js/flows/pairing*` `services/relay/src/pairing/*` `services/sidecar/src/pairing/*` | `docs/配对与宿主机接入/` |
| `app/mobile/ui/js/flows/connection*` `host-manage.js` `host-delete*.js` `tool-manage.js` | `docs/运维与工具管理/` |
| `app/mobile/ui/js/flows/chat.js` `app/mobile/ui/js/views/chat.js` `app/mobile/src-tauri/src/lib.rs` | `docs/聊天与报告/` |
| `services/sidecar/src/session/loop/chat.rs` `services/sidecar/src/session/loop/report.rs` | `docs/聊天与报告/` |
| `app/mobile/ui/js/modals/tool-detail.js` `services/sidecar/src/tooling/*` | `docs/工具详情与数据采集/` |
| `services/relay/src/auth/*` `services/relay/src/ws/*` `protocol/rust/src/lib.rs` | `docs/API与事件协议.md` |
| `services/relay/src/app.rs` `services/sidecar/src/runtime.rs` `services/sidecar/src/session/*` | `docs/架构与数据流.md` |
| `scripts/dist/*` `.github/workflows/*` | `docs/分发安装与卸载.md` `docs/CLI与环境变量.md` |
| `scripts/check-governance.sh` `scripts/check-doc-consistency.sh` | `docs/质量门禁与检查规范.md` `docs/代码治理与注释规范.md` |

## 3. 关键源码清单（门禁覆盖）

以下清单从代码目录导出；每个路径都必须在文档体系中有明确职责描述。

- `.github/workflows/release-android.yml`
- `.github/workflows/release-linux.yml`
- `.github/workflows/sync-release-to-oss.yml`
- `Makefile`
- `app/mobile/src-tauri/src/lib.rs`
- `app/mobile/src-tauri/src/main.rs`
- `app/mobile/ui/js/flows/chat.js`
- `app/mobile/ui/js/flows/connection-auth.js`
- `app/mobile/ui/js/flows/connection-events.js`
- `app/mobile/ui/js/flows/connection-send.js`
- `app/mobile/ui/js/flows/connection-socket-events.js`
- `app/mobile/ui/js/flows/connection-socket.js`
- `app/mobile/ui/js/flows/connection.js`
- `app/mobile/ui/js/flows/host-delete-errors.js`
- `app/mobile/ui/js/flows/host-delete-remote.js`
- `app/mobile/ui/js/flows/host-delete.js`
- `app/mobile/ui/js/flows/host-manage.js`
- `app/mobile/ui/js/flows/pairing-errors.js`
- `app/mobile/ui/js/flows/pairing-run.js`
- `app/mobile/ui/js/flows/pairing-scan.js`
- `app/mobile/ui/js/flows/pairing.js`
- `app/mobile/ui/js/flows/tool-manage.js`
- `app/mobile/ui/js/main.js`
- `app/mobile/ui/js/modals/add-tool.js`
- `app/mobile/ui/js/modals/host-notice.js`
- `app/mobile/ui/js/modals/pair-failure.js`
- `app/mobile/ui/js/modals/report-viewer.js`
- `app/mobile/ui/js/modals/tool-detail.js`
- `app/mobile/ui/js/services/pairing-link.js`
- `app/mobile/ui/js/services/relay-api.js`
- `app/mobile/ui/js/services/tauri.js`
- `app/mobile/ui/js/services/ws.js`
- `app/mobile/ui/js/state/chat.js`
- `app/mobile/ui/js/state/hosts.js`
- `app/mobile/ui/js/state/runtime.js`
- `app/mobile/ui/js/state/store.js`
- `app/mobile/ui/js/state/ui-refs.js`
- `app/mobile/ui/js/utils/dom.js`
- `app/mobile/ui/js/utils/format.js`
- `app/mobile/ui/js/utils/host-format.js`
- `app/mobile/ui/js/utils/log.js`
- `app/mobile/ui/js/utils/markdown.js`
- `app/mobile/ui/js/utils/platform.js`
- `app/mobile/ui/js/utils/rows.js`
- `app/mobile/ui/js/utils/type.js`
- `app/mobile/ui/js/views/banner.js`
- `app/mobile/ui/js/views/chat.js`
- `app/mobile/ui/js/views/debug.js`
- `app/mobile/ui/js/views/ops.js`
- `app/mobile/ui/js/views/tabs.js`
- `app/mobile/ui/js/views/tools.js`
- `protocol/rust/src/lib.rs`
- `scripts/check-doc-consistency.sh`
- `scripts/check-governance.sh`
- `scripts/dist/relay-sidecar.sh`
- `scripts/dist/sidecar.sh`
- `scripts/dist/yc-relay.sh`
- `scripts/dist/yc-sidecar.sh`
- `scripts/pairing.sh`
- `scripts/self-debug-loop.sh`
- `services/relay/src/api/error.rs`
- `services/relay/src/api/mod.rs`
- `services/relay/src/api/response.rs`
- `services/relay/src/api/types.rs`
- `services/relay/src/app.rs`
- `services/relay/src/auth/handlers/devices.rs`
- `services/relay/src/auth/handlers/http.rs`
- `services/relay/src/auth/handlers/mod.rs`
- `services/relay/src/auth/handlers/refresh.rs`
- `services/relay/src/auth/handlers/revoke.rs`
- `services/relay/src/auth/handlers/verify.rs`
- `services/relay/src/auth/mod.rs`
- `services/relay/src/auth/pop.rs`
- `services/relay/src/auth/store.rs`
- `services/relay/src/auth/token.rs`
- `services/relay/src/auth/token_crypto.rs`
- `services/relay/src/cli/mod.rs`
- `services/relay/src/logging.rs`
- `services/relay/src/main.rs`
- `services/relay/src/pairing/bootstrap.rs`
- `services/relay/src/pairing/handlers/bootstrap.rs`
- `services/relay/src/pairing/handlers/exchange.rs`
- `services/relay/src/pairing/handlers/http.rs`
- `services/relay/src/pairing/handlers/mod.rs`
- `services/relay/src/pairing/handlers/preflight.rs`
- `services/relay/src/pairing/handlers/ticket.rs`
- `services/relay/src/pairing/mod.rs`
- `services/relay/src/pairing/ticket.rs`
- `services/relay/src/state.rs`
- `services/relay/src/ws/envelope.rs`
- `services/relay/src/ws/handlers/auth.rs`
- `services/relay/src/ws/handlers/http.rs`
- `services/relay/src/ws/handlers/mod.rs`
- `services/relay/src/ws/mod.rs`
- `services/sidecar/src/cli/mod.rs`
- `services/sidecar/src/cli/pairing.rs`
- `services/sidecar/src/cli/relay.rs`
- `services/sidecar/src/config.rs`
- `services/sidecar/src/control.rs`
- `services/sidecar/src/logging.rs`
- `services/sidecar/src/main.rs`
- `services/sidecar/src/pairing/banner.rs`
- `services/sidecar/src/pairing/bootstrap_client.rs`
- `services/sidecar/src/pairing/mod.rs`
- `services/sidecar/src/runtime.rs`
- `services/sidecar/src/session/loop/chat.rs`
- `services/sidecar/src/session/loop/command.rs`
- `services/sidecar/src/session/loop/mod.rs`
- `services/sidecar/src/session/loop/report.rs`
- `services/sidecar/src/session/loop/url.rs`
- `services/sidecar/src/session/mod.rs`
- `services/sidecar/src/session/snapshots.rs`
- `services/sidecar/src/session/transport.rs`
- `services/sidecar/src/stores.rs`
- `services/sidecar/src/tooling/adapters/mod.rs`
- `services/sidecar/src/tooling/adapters/openclaw.rs`
- `services/sidecar/src/tooling/adapters/opencode.rs`
- `services/sidecar/src/tooling/cli_parse.rs`
- `services/sidecar/src/tooling/core/cache.rs`
- `services/sidecar/src/tooling/core/mod.rs`
- `services/sidecar/src/tooling/core/scheduler.rs`
- `services/sidecar/src/tooling/core/types.rs`
- `services/sidecar/src/tooling/mod.rs`
- `services/sidecar/src/tooling/num.rs`
- `services/sidecar/src/tooling/opencode_session/cache.rs`
- `services/sidecar/src/tooling/opencode_session/fs.rs`
- `services/sidecar/src/tooling/opencode_session/mod.rs`
- `services/sidecar/src/tooling/opencode_session/types.rs`
- `services/sidecar/src/tooling/tool_id.rs`

## 4. 维护规则

1. 新增或重命名上述清单内源码文件时，必须先更新本索引，再更新对应能力文档。
2. 文档更新顺序必须是“读代码 -> 写文档 -> 跑门禁”，不能只改文档。
3. 若代码涉及多能力域，需在多个能力目录文档中同步补充，不允许只在单篇文档留抽象描述。
4. 第三方 vendor 资产（如 `app/mobile/ui/js/vendor/*`）不纳入能力事实清单，但变更时仍需在相关文档中说明引入原因。
