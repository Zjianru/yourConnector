# yourConnector 运维与工具管理：代码映射与验收口径

## 1. 代码映射（能力 -> 文件）

1. 连接生命周期：`app/mobile/ui/js/flows/connection-socket.js`
2. 连接事件安全收敛：`app/mobile/ui/js/flows/connection-socket-events.js`
3. 下行事件分发与回执处理：`app/mobile/ui/js/flows/connection-events.js`
4. 发送事件封装：`app/mobile/ui/js/flows/connection-send.js`
5. 工具接入/断开/改名/进程控制：`app/mobile/ui/js/flows/tool-manage.js`
6. 宿主机管理与负载弹窗：`app/mobile/ui/js/flows/host-manage.js`
7. 删除补偿：`app/mobile/ui/js/flows/host-delete.js` `host-delete-remote.js` `host-delete-errors.js`
8. 运维页面渲染：`app/mobile/ui/js/views/ops.js` `views/banner.js` `views/tools.js`
9. Sidecar 命令解析：`services/sidecar/src/control.rs`
10. Sidecar 命令执行与回执：`services/sidecar/src/session/loop/command.rs`

## 2. 验收清单（运维域）

1. 启动后自动连接所有宿主机；连接状态可见。
2. 断线自动重连 5 次后进入“需手动重连”。
3. Banner 白点随滑动正确更新，点击卡片可打开负载弹窗。
4. 候选工具可接入，已接入工具可左滑断开/改名。
5. 权限失败可自动重绑并重试一次，随后回退人工提示。
6. OpenClaw 支持重启，OpenCode 重启请求会被前置拦截。
7. 删除宿主机会立即从 UI 隐藏，并在补偿队列可见重试状态。
8. 删除补偿终态错误会自动收口，不会无限重试。

## 3. 快速联调命令

```bash
# 启动服务
make run-relay
make run-sidecar

# 启动移动端（iOS）
make run-mobile-tauri-ios IOS_SIM="iPhone 17 Pro"

# 质量与文档门禁
make check-governance
```

## 4. 与其他文档关系

1. 聊天与报告联动见 `docs/聊天与报告/`。
2. 详情刷新与 schema 见 `docs/工具详情与数据采集/`。
3. 配对与安全见 `docs/配对与宿主机接入/`。
