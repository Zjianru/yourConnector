# yourConnector 配对与宿主机接入：实施计划与验收

## 1. 文档定位

1. 记录配对与接入链路的实施状态。
2. 提供代码映射与验收入口，避免设计文档与实现脱节。

## 2. 已完成实施项

### 2.1 配对签发统一化

1. Relay 提供 `/v1/pair/bootstrap`。
2. Sidecar banner 与 `scripts/pairing.sh` 均改为调用 Relay 签发。
3. 终端输出统一包含配对链接与模拟扫码命令。

### 2.2 App 安全收口

1. App 侧配对与 WS 握手不再接受 `pairToken`。
2. 配对后换发设备凭证，后续连接使用 PoP 鉴权。
3. 凭证刷新、设备吊销、设备列表接口可用。

### 2.3 多宿主接入闭环

1. 首屏支持“无宿主机配对入口 / 有宿主机总览”双态。
2. 多宿主连接、断开、重连与删除补偿可用。
3. 工具分组、详情、聊天、报告能力可跟随宿主机隔离。

## 3. 代码映射

1. Relay 配对与鉴权：
   - `services/relay/src/pairing/*`
   - `services/relay/src/auth/*`
   - `services/relay/src/ws/*`
2. Sidecar 会话与控制：
   - `services/sidecar/src/session/loop/*`
   - `services/sidecar/src/control.rs`
3. Mobile 配对流程：
   - `app/mobile/ui/js/flows/pairing*.js`
   - `app/mobile/ui/js/flows/connection-auth.js`

## 4. 验收与状态引用

1. 执行型验收：`docs/已完成功能验收.md`
2. 里程碑状态：`docs/里程碑与待办.md`
3. 协议细节：`docs/配对与宿主机接入/02-协议与安全方案.md`
